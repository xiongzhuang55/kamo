<template>
    <div>
      <div class="block">
        <span class="demonstration">交易日期</span>
        <el-date-picker v-model="date1" type="date" placeholder="选择日期" format="yyyy-MM-dd" :picker-options="startDatePicker">
        </el-date-picker>
        <span class="demonstration">-</span>
        <el-date-picker v-model="date2" type="date" placeholder="选择日期" format="yyyy-MM-dd" :picker-options="endDatePicker">
        </el-date-picker>
        <el-button type="success" class="search-btn" @click="search">搜索</el-button>
      </div>
      <el-table :data="tableData" style="width: 100%;text-align: center" border>
        <el-table-column label="销量排名" align="center" prop="rank"></el-table-column>
        <el-table-column label="菜品编号" align="center" prop="number"></el-table-column>、
        <el-table-column label="菜品名称" align="center" prop="name"></el-table-column>
        <el-table-column label="销量" align="center" prop="price"></el-table-column>
        <el-table-column label="状态" align="center" prop="state"></el-table-column>
      </el-table>
    </div>
</template>

<script>
    export default {
      name: "dishCount",
      data(){
        return {
          date1: '',
          date2: '',
          startDatePicker:this.beginDate(),
          endDatePicker:this.processDate(),
          tableData: [{
            rank:1,
            number: '003',
            price: '195',
            name: '剁椒鱼头',
            state:'正常'
          }, {
            rank:2,
            number: '007',
            price: '85',
            name: '红烧茄子',
            state:'已删除'
          }, {
            rank:3,
            number: '002',
            price: '68',
            name: '鱼香肉丝',
            state:'已删除'
          }]
        }
      },
      methods: {
        beginDate(){
          let self = this;
          return {
            disabledDate(time){
              if(self.date2){
                return new Date(self.date2).getTime() < time.getTime()
              }else{
                return time.getTime() > Date.now();//开始时间不选时，结束时间最大值小于等于当天
              }
            }
          }
        },
        //提出结束时间必须大于提出开始时间
        processDate() {
          let self = this;
          return {
            disabledDate(time) {
              if (self.date1) {
                return new Date(self.date1).getTime() > time.getTime() || time.getTime() > Date.now()
              } else {
                return time.getTime() > Date.now()//开始时间不选时，结束时间最大值小于等于当天
              }
            }
          }
        },
        search() {
          if(this.date1 === ''){
            this.$message.error('请选择开始时间');
          }else if(this.date2 === ''){
            this.$message.error('请选择结束时间');
          }else{
            console.log('筛选')
          }
        }
      }
    }
</script>

<style scoped>
.search-btn{
  width:89px;
  height:40px;
}
  .demonstration{
    margin:0 10px;
  }
</style>
